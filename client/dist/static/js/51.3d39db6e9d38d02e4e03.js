webpackJsonp([51],{HiDa:function(t,e){},Krw2:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("2fVN"),i=s("25Zw"),r={name:"IdeasEdit",components:{UE:s("VayU").a,Upload:a.a,Upload2:i.a},data:function(){return{resData:"",oks:!0,error:"",subjradio:"",SubjectsList:[],defaultDes:"",defaultMsg:"",imgs:[],objNum:3,showFileData:[],ue2:"ue2",config2:{initialFrameWidth:null,initialFrameHeight:400,autoHeightEnabled:!1,autoFloatEnabled:!0,maximumWords:3e5,toolbars:[["Source","Bold","Underline","JustifyLeft","JustifyCenter","JustifyRight","ForeColor","Undo","Redo","FontFamily","FontSize","InsertImage","Emotion","InsertVideo","Link","Map","Preview","inserttable","FullScreen"]],elementPathEnabled:!1}}},created:function(){this.getInfo(this.getUrl("id")),this.SubjectsList=JSON.parse(sessionStorage.getItem("subMenu"))},methods:{checkFun:function(){this.oks=!this.oks},addImgs:function(t){var e=this;this.imgs="",setTimeout(function(){e.imgs=t},200)},getInfo:function(t){var e=this;this.$axios("/api/ideas/artedit/"+t).then(function(t){if(t.data.imgs.length>0&&(e.showFileData=t.data.imgs),400==t.data.code)return alert(t.data.msg),!1;e.resData=t.data,e.resData.subjectId&&(e.subjradio=e.resData.subjectId),e.defaultDes=e.resData.description,e.defaultMsg=e.resData.details,e.oks=e.resData.checkT})},submit:function(){var t=this,e={title:this.resData.title,subjectId:this.subjradio,description:this.resData.description,imgs:this.imgs,details:this.addImg(this.$refs.ue2.getContent()),checkT:this.oks};0==this.imgs.length&&(e.imgs=[]),this.$axios.post("/api/ideas/edit/"+this.getUrl("id"),e).then(function(e){t.$message({message:e.data.success_msg,type:"success"}),t.$router.push({path:"/artlist"})}).catch(function(e){t.error=e.response.data,console.log(t.error)})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card card-body IdeasEdit container"},[s("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("div",{staticClass:"headBox",staticStyle:{padding:"15px 0"}},[s("div",{staticClass:"head-title",staticStyle:{display:"inline"}},[t._v("分类：")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%",display:"inline"}},t._l(t.SubjectsList,function(e,a){return s("el-radio-group",{key:a,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio,callback:function(e){t.subjradio=e},expression:"subjradio"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("标题：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.resData.title,expression:"resData.title"}],staticClass:"form-control title",class:{"is-invalid":t.error.title},staticStyle:{display:"inline-block"},attrs:{type:"text",name:"title"},domProps:{value:t.resData.title},on:{input:function(e){e.target.composing||t.$set(t.resData,"title",e.target.value)}}}),t._v(" "),t.error.title?s("div",{staticClass:"invalid-feedback"},[t._v("\r\n          "+t._s(t.error.title)+"\r\n        ")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("Upload",{attrs:{objNum:this.objNum,showFileData:this.showFileData},on:{addImgs:t.addImgs}}),t._v(" "),s("br"),t._v(" "),s("label",{attrs:{for:"title"}},[t._v("内容简介")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.resData.description,expression:"resData.description"}],staticClass:"form-control",class:{"is-invalid":t.error.description},staticStyle:{height:"100px"},attrs:{name:"description"},domProps:{value:t.resData.description},on:{input:function(e){e.target.composing||t.$set(t.resData,"description",e.target.value)}}}),t._v(" "),t.error.description?s("div",{staticClass:"invalid-feedback"},[t._v("\r\n          "+t._s(t.error.description)+"\r\n        ")]):t._e()],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"details"}},[t._v("详情")]),t._v(" "),this.defaultMsg?[s("UE",{ref:"ue2",attrs:{defaultMsg:t.defaultMsg,config:t.config2,id:t.ue2}})]:t._e(),t._v(" "),t.error.details?s("div",{staticClass:"invalid-feedback"},[t._v("\r\n          "+t._s(t.error.details)+"\r\n        ")]):t._e()],2),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("编辑")]),t._v(" "),s("a",{staticClass:"btn-default btn",staticStyle:{background:"#ddd",color:"#555"},attrs:{href:"javascript:history.go(-1)"}},[t._v("返回")]),t._v(" "),s("a",{class:{oks:t.oks},staticStyle:{"margin-left":"3%"},on:{click:function(e){t.checkFun()}}},[t.oks?[t._v("已开")]:t._e(),t._v(" "),!0!==t.oks?[t._v("已关")]:t._e()],2)])])])},staticRenderFns:[]};var n=s("VU/8")(r,o,!1,function(t){s("HiDa")},"data-v-06ba3475",null);e.default=n.exports}});