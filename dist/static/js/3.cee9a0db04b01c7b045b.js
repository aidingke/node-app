webpackJsonp([3,11,22,23,24],{"/Jwq":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("BnGv"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Completion container prel"},[s("Header",{attrs:{title:"填空题库"}}),t._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:t.goBackInfo}}),t._v(" "),s("div",{staticClass:"headBox"},[s("h1",{staticClass:"display-4 text-center line pb15"},[t._v("填空题题库")]),t._v(" "),s("h3",[s("span",{staticClass:"addTi",on:{click:t.openAddInfo}},[t._v("+")]),t._v("每道填空题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scores,expression:"scores"}],staticStyle:{"border-bottom":"1px dotted #555"},attrs:{disabled:""},domProps:{value:t.scores},on:{keyup:[t.scoreFun,t.keyUpFun],input:function(e){e.target.composing||(t.scores=e.target.value)}}}),t._v("分")])]),t._v(" "),s("div",{staticClass:"headBox"},[s("div",{staticClass:"head-title",staticStyle:{display:"inline"}},[t._v("科目：")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%",display:"inline"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",display:"inline-block"},model:{value:t.subjradio1,callback:function(e){t.subjradio1=e},expression:"subjradio1"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)})),t._v(" "),s("div",{staticStyle:{display:"inline"}},[s("el-button",{staticStyle:{width:"90px",display:"inline"},attrs:{type:"primary"},on:{click:t.submitSubjesc}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:t.filterInput,callback:function(e){t.filterInput=e},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:t.onsearchHandle},slot:"append"},[t._v("搜索")])],1)],1),t._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选("+t._s(t.checkVal)+"/"+t._s(t.allVal)+")")])],1),t._v(" "),t.tagTotal<=0?s("div",{staticClass:"noInfo"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filterBy(t.resData,t.filterInput),function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("el-checkbox-group",{on:{change:t.handleCheckedSingleChange},model:{value:e.checkedSingles,callback:function(s){t.$set(e,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:e.checkedSingles}},[t._v(t._s(i+1)+"、"+t._s(e.questDesc))]),t._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(e){t.deleAnswers(i)}}},[s("img",{attrs:{src:"static/images/dele.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scores)+"分")])],1)]),t._v(" "),s("ul",t._l(e.itemList,function(e,i){return s("li",{key:i},[t._v(" （"+t._s(i+1)+"） "),s("span",[t._v(t._s(e.answersl))])])}))],1)])})],2)]),t._v(" "),s("div",{staticClass:"selectBox container pabs",staticStyle:{bottom:"0px","z-index":"99",padding:"15px 0"}},[s("el-row",[s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:t.goBackInfo}},[t._v("返回")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("提交")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"新增填空题",visible:t.showAdd},on:{"update:visible":function(e){t.showAdd=e},close:t.resetForm}},[s("el-form",{attrs:{model:t.form}},[s("div",{staticClass:"head-div"},[s("div",{staticClass:"head-title"},[t._v("科目")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio,callback:function(e){t.subjradio=e},expression:"subjradio"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)}))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("每题分数："),s("b",{staticStyle:{color:"red"}},[t._v(t._s(t.scores))]),t._v("分")]),t._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"500",type:"textarea",id:"txt1",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},on:{change:t.changeValue,blur:t.getTxt1CursorPosition},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(e){t.addAnswers()}}},[t._v("插入填空")]),t._v(" "),s("span",[t._v("正确答案")])]),t._v(" "),t._l(t.form.resData,function(e,i){return s("div",{key:i,staticClass:"contBoxMain"},[s("span",[t._v("（"+t._s(i+1)+"）")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"items.content"}],attrs:{placeholder:"输入答案"},domProps:{value:e.content},on:{input:function(s){s.target.composing||t.$set(e,"content",s.target.value)}}}),t._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(e){t.closeAnswers(i)}}})])})],2)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"45%"},attrs:{type:"primary"},on:{click:t.AddInfo}},[t._v("确 定")]),t._v(" "),s("el-button",{staticStyle:{display:"inline",width:"45%"},on:{click:t.resetForm}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/images/success.png"}}),t._v(" "),s("div",{staticClass:"name"},[t._v(" 新增填空题成功")]),t._v(" "),t.sendMsgDisabled?s("div",{staticClass:"time"},[t._v(t._s(t.time+"s回到详情页")+">")]):t._e()]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"45%"},attrs:{type:"primary"},on:{click:t.openAddInfo}},[t._v("再加一个")]),t._v(" "),s("el-button",{staticStyle:{display:"inline",width:"45%"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("知道了")])],1)])]),t._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[t._v(t._s(t.checkScore))]),t._v("\n\t\t\t\t/"),s("span",[t._v("100 ")])]),t._v(" "),s("p",[t._v("试卷分值")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default"},[e("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),e("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var n=function(t){s("RroQ")},o=s("VU/8")(i.a,a,!1,n,null,null);e.default=o.exports},BnGv:function(t,e,s){"use strict";(function(t){var i=s("fZjL"),a=s.n(i),n=s("Xxa5"),o=s.n(n),r=s("exGp"),c=s.n(r);e.a={name:"Completion",props:{objCom:{type:Object}},data:function(){return{numVal:0,filterInput:"",allVal:"",questKind:"2",subjradio:"",subjradio1:"",SubjectsList:[],scores:10,checkScore:0,allScores:0,editBtn:0,tagTotal:"",dataVal:"",checkVal:0,checkAll:!0,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,sendMsgDisabled:!1,form:{name:"",resData:[]},itemList:[],questList:[],ansList:[],resData:[{qcDesc:"2汽车空调的运行原理以及空调结构解析是什么？",arr:[{name:"A.1压缩机"},{name:"B.冷凝器"},{name:"C.车门"},{name:"D.底盘"}],checkedSingles:!0}]}},methods:{goBackInfo:function(){var t={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",t)},resetForm:function(){this.form={name:"",resData:[]},this.showAdd=!1},changeValue:function(){console.log(1)},openAddInfo:function(){this.editBtn=-1,this.showAdd=!0},filterBy:function(t,e){return 0===e.length?(this.tagTotal=t.length,this.resData):(t=t.filter(function(t){if(t.questDesc.match(e))return t.questDesc.match(e)}),this.tagTotal=t.length,t)},AddInfo:function(){var t=this;return c()(o.a.mark(function e(){var s,i,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s={subjectId:t.subjradio,questKind:t.questKind,questDesc:"",questAnswer:"",itemList:[]},i=void 0,a=void 0,a=t.form.resData,!(t.form.name.length<5||t.form.name.length>500)){e.next=7;break}return t.dialog("题目描述字数不能少于5个且不能多于500个！"),e.abrupt("return",!1);case 7:if(s.questDesc=t.form.name,a.forEach(function(t,e){if(""==t.content)i=1;else{var a={};a.item=e+",",s.itemList.push(a),s.questAnswer+=t.content+"ψ"}}),1!=i){e.next=12;break}return t.dialog("选项内容必填哦"),e.abrupt("return",!1);case 12:if(s.questAnswer=s.questAnswer.substring(0,s.questAnswer.length-1),-1==t.editBtn){e.next=18;break}t.resData.splice(t.editBtn,1,s),console.log(t.resData[t.editBtn]),e.next=23;break;case 18:return e.next=20,t.$axioss.addQuestionItem(s);case 20:n=e.sent,t.resetForm(),1e3==n.data.code?(t.showAdd=!1,t.dialogTableVisible=!0,t.handleCheckedSingleChange(),t.getList()):t.dialog("操作失败");case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,t)}))()},editAnswers:function(t){this.showAdd=!0,this.form.name=this.resData[t].name;var e=[];this.resData[t].arr.forEach(function(t,s){var i={};i.content=t.name,e.push(i)}),this.form.resData=e,this.editBtn=t},getTxt1CursorPosition:function(){var t=document.getElementById("txt1"),e=-1;if(t.selectionStart)e=t.selectionStart;else if(t.value.length>0){var s=document.selection.createRange();s.moveStart("character",-this.form.name.length),e=s.text.length}return sessionStorage.setItem("cursurPosition",e)},addAnswers:function(){var t={title:"",content:"",answers:!1},e=sessionStorage.getItem("cursurPosition");if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;t.id=this.form.resData.length-0,this.form.resData.push(t),"-1"===e?this.form.name+="("+(t.id+1)+")":e<this.form.name.length?this.form.name=this.form.name.slice(0,e)+"("+(t.id+1)+")"+this.form.name.slice(e):this.form.name=this.form.name.slice(0,e)+"("+(t.id+1)+")"},addAnswersSort:function(){for(var t=0,e=0,s=this.form.name.length;e<s;e++)this.form.name[e].match(/\d/)&&this.form.name[e]==Number(this.form.name.charAt(e))&&(t+=1,this.$set(this.form,"name",this.form.name.replace("("+this.form.name.lastIndexOf(this.form.name.charAt(e))+")","("+t+")")))},deleAnswers:function(t){this.checkVal;this.resData.length,this.resData.splice(t,1),this.handleCheckedSingleChange()},closeAnswers:function(t){var e=0;this.form.name=this.form.name.replace("("+(t+1)+")","");for(var s=0,i=this.form.name.length;s<i;s++)this.form.name[s].match(/\d/)&&t<this.form.name.charAt(s)&&(this.form.name=this.form.name.replace("("+(t+2+e)+")","("+(t+1+e)+")"),e+=1);this.form.resData.splice(t,1)},onsearchHandle:function(){},handleCheckAllChange:function(t){this.checkAll?this.resData.forEach(function(t,e){t.checkedSingles=!0}):this.resData.forEach(function(t,e){t.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(t){this.scoreFun()},keyUpFun:function(){},scoreFun:function(){var t=0,e=0,s=0,i=!0,a=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(n,o){return t+=n.score,!0===n.checkedSingles?(e+=a,s++):i=!1,s}),t=this.allVal*this.scores,this.checkAll=!!i,this.checkVal=s,this.allScores=t,this.checkScore=e},getList:function(t){var e=this;return c()(o.a.mark(function s(){var i,n,r,c;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={questKind:e.questKind},[],n=[],i.subject=t||e.subjradio1.toString(),s.next=4,e.$axioss.getQuestionItemList(i);case 4:if(1100!==(r=s.sent).code){s.next=10;break}return e.dialog(r.message),s.abrupt("return",!1);case 10:if(1e3!==r.data.code){s.next=18;break}if(0!=a()(r.data.newArr.data).length){s.next=14;break}return e.resData=[],s.abrupt("return",!1);case 14:e.resData=r.data.newArr.data,e.resData.forEach(function(t,e){n=t.questAnswer.split("ψ"),t.itemList.forEach(function(t,e){t.answersl=n[e]})}),e.objCom.parentData.length>0&&(c=e.objCom.parentData,e.scores=e.objCom.scores,e.resData.forEach(function(t,e){t.checkedSingles=!1,c.forEach(function(e,s){t.qcDesc===e.qcDesc&&(t.checkedSingles=!0)})})),e.scoreFun();case 18:case"end":return s.stop()}},s,e)}))()},submitInfo:function(){var t=this.resData,e=[],s={};s.tit=this.questKind,t.forEach(function(t,s){!0===t.checkedSingles&&e.push(t)}),s.score=this.checkScore,s.resData=e,this.$emit("getPaperInfo",s)},getSubjectMenuList:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axioss.getSubjectMenuList();case 2:if(1e3!=(s=e.sent).data.code){e.next=8;break}return t.SubjectsList=s.data.data,t.subjradio1=s.data.data[0]._id,t.subjradio=s.data.data[0]._id,e.abrupt("return",t.subjradio1);case 8:case"end":return e.stop()}},e,t)}))()},submitSubjesc:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.getList(t.subjradio1),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e,t)}))()}},mounted:function(){t("footer").hide();var e=this;this.getSubjectMenuList().then(function(t){""===t&&null===t||e.getList(t)})},computed:{name:function(){return this.form.arr.push(this.form.name)}},watch:{dialogTableVisible:function(t){if(t){var e=this;e.sendMsgDisabled=!0;var s=window.setInterval(function(){e.time--<=1&&(e.time=3,e.sendMsgDisabled=!1,e.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}}}).call(e,s("7t+N"))},CzDK:function(t,e){},H8R1:function(t,e,s){"use strict";(function(t){var i=s("fZjL"),a=s.n(i),n=s("Xxa5"),o=s.n(n),r=s("exGp"),c=s.n(r);e.a={name:"Single",props:{objSin:{type:Object}},data:function(){return{filterInput:"",allVal:"",scores:"3",checkScore:0,allScores:0,editBtn:0,dataVal:"",keyNums:4,checkVal:0,checkAll:!1,questKind:0,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,tagTotal:"",subjradio:"",subjradio1:"",SubjectsList:[],sendMsgDisabled:!1,form:{token:"",subjectId:2,radio:"",name:"",answers:[{title:"0",content:""},{title:"1",content:""},{title:"2",content:""},{title:"3",content:""}]},resData:[{}],showPaperShow:!0}},methods:{goBackInfo:function(){var t={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",t)},openAddInfo:function(){this.form.name="",this.form.radio="",this.form.answers.forEach(function(t,e){t.title=e,t.content=""}),this.editBtn=-1,this.showAdd=!0},filterBy:function(t,e){return 0===e.length?(this.tagTotal=t.length,this.resData):(t=t.filter(function(t){if(t.questDesc.match(e))return t.questDesc.match(e)}),this.tagTotal=t.length,t)},AddInfo:function(){var t=this;return c()(o.a.mark(function e(){var s,i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s={subjectId:t.subjradio,questKind:t.questKind,questDesc:"",questAnswer:"",itemList:[]},i=void 0,a=[],!(t.form.name.length<5||t.form.name.length>37)){e.next=6;break}return t.dialog("题目描述字数不能少于5个且不能多于36个！"),e.abrupt("return",!1);case 6:if(""!==t.form.radio){e.next=11;break}return t.dialog("请选个正确答案"),e.abrupt("return",!1);case 11:if(s.questDesc=t.form.name,t.form.answers.forEach(function(t,e,s){if(""==t.content)i=1;else{var n,o={};n=0==e?"A":1==e?"B":2==e?"C":3==e?"D":4==e?"E":5==e?"F":"无解",o.item=n,o.itemDesc=t.content,a.push(o)}}),1!=i){e.next=16;break}return t.dialog("选项内容必填"),e.abrupt("return",!1);case 16:if(s.itemList=a,s.questAnswer=t.form.radio,-1==t.editBtn){e.next=22;break}t.resData.splice(t.editBtn,1,s),e.next=26;break;case 22:return e.next=24,t.$axioss.addQuestionItem(s);case 24:1e3==e.sent.data.code?(t.showAdd=!1,t.dialogTableVisible=!0,t.handleCheckedSingleChange(),t.getList()):t.dialog("添加没成功！再试一次");case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,t)}))()},editAnswers:function(t){this.showAdd=!0,this.form.name=this.resData[t].name,this.form.radio=this.resData[t].answers;var e=[];this.resData[t].arr.forEach(function(t,s){var i={};i.title=s,i.content=t.substring(2),e.push(i)}),this.form.answers=e,this.editBtn=t},addAnswers:function(){var t,e={title:"",content:""};if(t=this.keyNums,e.title=t,this.keyNums++,!(this.form.answers.length<6))return this.dialog("不能再添加了！"),!1;this.form.answers.push(e)},deleAnswers:function(t){this.checkVal;this.resData.length,this.resData.splice(t,1),this.handleCheckedSingleChange()},closeAnswers:function(t){if(t<2)return this.dialog("保留前2个选项，不能再删了！"),!1;this.form.radio="",this.form.answers.splice(t,1),console.log(this.form)},onsearchHandle:function(){},handleCheckAllChange:function(t){this.checkAll?this.resData.forEach(function(t,e){t.checkedSingles=!0}):this.resData.forEach(function(t,e){t.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(t){this.scoreFun()},scoreFun:function(){var t=0,e=0,s=!0,i=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(a,n){return!0===a.checkedSingles?(t+=i,e++):s=!1,e}),this.allScores=this.allVal*this.scores,this.checkAll=!!s,this.checkVal=e,this.checkScore=t},submitSubjesc:function(){var t=this;return c()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={questKind:t.questKind,subject:t.subjradio1},e.next=3,t.$axioss.getQuestionItemList(s);case 3:if(404!==(i=e.sent).status){e.next=9;break}return t.dialog("查询出错了"),e.abrupt("return",!1);case 9:if(1e3!==i.data.code){e.next=17;break}if(0!=a()(i.data).length){e.next=15;break}return t.resData=[],e.abrupt("return",!1);case 15:t.resData=i.data.newArr.data,t.resData.forEach(function(t,e){t.questAnswer=Number(t.questAnswer)});case 17:case"end":return e.stop()}},e,t)}))()},getSubjectMenuList:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axioss.getSubjectMenuList();case 2:if(1e3!=(s=e.sent).data.code){e.next=8;break}return t.SubjectsList=s.data.data,t.subjradio1=s.data.data[0]._id,t.subjradio=s.data.data[0]._id,e.abrupt("return",t.subjradio1);case 8:case"end":return e.stop()}},e,t)}))()},getList:function(t){var e=this;return c()(o.a.mark(function s(){var i,a,n;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(i={questKind:e.questKind.toString(),subject:""}).subject=t||e.subjradio1.toString(),s.next=4,e.$axioss.getQuestionItemList(i);case 4:if(404!==(a=s.sent).status){s.next=10;break}return e.dialog("查询出错了"),s.abrupt("return",!1);case 10:1e3===a.data.code&&(e.resData=a.data.newArr.data,e.resData.forEach(function(t,e){t.questAnswer=Number(t.questAnswer)}),e.objSin.parentData.length>0&&(n=e.objSin.parentData,e.scores=e.objSin.scores,e.resData.forEach(function(t,e){t.checkedSingles=!1,n.forEach(function(e,s){t._id==e._id&&(t.checkedSingles=!0)})})),e.scoreFun());case 11:case"end":return s.stop()}},s,e)}))()},submitInfo:function(){var t=this.resData,e=[],s={};s.tit=this.questKind,t.forEach(function(t,s){!0===t.checkedSingles&&e.push(t)}),s.score=this.checkScore,s.resData=e,this.$emit("getPaperInfo",s)}},mounted:function(){var e=this;this.getSubjectMenuList().then(function(t){""===t&&null===t||e.getList(t)}),t("footer").hide()},watch:{dialogTableVisible:function(t){if(t){var e=this;e.sendMsgDisabled=!0;var s=window.setInterval(function(){e.time--<=1&&(e.time=3,e.sendMsgDisabled=!1,e.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}}}).call(e,s("7t+N"))},KT6r:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),n=s("Gu7T"),o=s.n(n),r=s("exGp"),c=s.n(r),l=s("xx8U"),u=s("auoD"),d=s("/Jwq"),h=s("OULz"),f={name:"AddTestPaper",components:{Single:l.default,MultipleChoice:u.default,Completion:d.default,Discussion:h.default},data:function(){return{questType:0,typeTitle:"",questBankTitle:"",questDesc:"",score:"",checkS:"",checkT:"",checkClass:"",isPublic:1,startTime:"",endTime:"",objSin:{},objMul:{},objJud:{},objCom:{},objDis:{},objParams:{},objQues:{},sinData:[],mulData:[],JudData:[],comData:[],DisData:[],paperNumber:"",classList:[],checkClassId:"",SubjectsList:[],subId:"",levelId:"",subjradio:"",url:window.location.href,checkScore:"",allScores:100,questSingleNum:0,questMultNum:0,questJudgeNum:0,questFillNum:0,questDissNum:0,questList:[],scoreA0:0,scoreA1:0,scoreA2:0,scoreA3:0,scoreA4:0,subjectId:0,level:1,showPaperShow:!0,addPaperShow:!1,startBled:!1,endBled:!1,classBled:!1,targetImg:"",allQuesNum:[],imgDialogVisible:!1}},methods:{goBack:function(t){this.$router.back(-1)},showImages:function(){this.targetImg=event.target.getAttribute("src"),this.imgDialogVisible=!0},changeClass:function(){this.checkClass?(this.classBled=!0,this.checkClassId=0,this.classList.forEach(function(t,e){!0===t.selected&&(t.selected=!1)})):(this.classBled=!1,this.checkClassId="")},changeTimes:function(){this.checkT?(this.startBled=!0,this.endBled=!0,this.startTime="",this.endTime=""):(this.startBled=!1,this.endBled=!1)},singleChange:function(){},countTime:function(t,e){var s=e.getTime()-t.getTime(),i=s%864e5,a=i%36e5,n=a%6e4;return Math.floor(s/864e5)+Math.floor(i/36e5)+Math.floor(a/6e4)+Math.round(n/1e3)},checkTime:function(){if(""==this.startTime);else if(""!=this.startTime&&""!=this.endTime&&this.countTime(this.startTime,this.endTime).toString()<0)return this.dialog("开始时间不能大于结束时间！"),!1},QuesFun:function(){this.showPaperShow=!1,this.addPaperShow=!0,this.paperNumber=5,this.objParams.questType=this.questType},editAnswers:function(t){this.showPaperShow=!1,this.addPaperShow=!0,this.paperNumber=t,this.objSin.subId=this.subId,this.objSin.levelId=this.levelId,this.objSin.scoresAll=this.checkScore,this.objSin.scores=Number(this.scoreA0/this.questSingleNum),this.objSin.parentData=this.sinData,this.objMul.subId=this.subId,this.objMul.levelId=this.levelId,this.objMul.scoresAll=this.checkScore,this.objMul.scores=Number(this.scoreA1/this.questMultNum),this.objMul.parentData=this.mulData,this.objCom.subId=this.subId,this.objCom.levelId=this.levelId,this.objCom.scoresAll=this.checkScore,this.objCom.scores=Number(this.scoreA2/this.questFillNum),this.objCom.parentData=this.comData,this.objDis.subId=this.subId,this.objDis.levelId=this.levelId,this.objDis.scoresAll=this.checkScore,this.objDis.scores=Number(this.scoreA3/this.questDissNum),this.objDis.parentData=this.DisData},goBackInfo:function(t){this.showPaperShow=t.showPaperShow,this.addPaperShow=t.addPaperShow,this.paperNumber=t.paperNumber,this.objParams.qbId=t.qbId},goBackDetail:function(t){this.showPaperShow=t.showPaperShow,this.addPaperShow=t.addPaperShow,this.paperNumber=t.paperNumber,this.objQues.qbId=t.qbId},BigObjInfo:function(t){this.showPaperShow=t.showPaperShow,this.addPaperShow=t.addPaperShow,t.sinData&&(this.objSin.parentData=this.sinData=t.sinData,this.scoreA0=t.scoreA0,this.questSingleNum=t.sinData.length),t.mulData&&(this.objMul.parentData=this.mulData=t.mulData,this.scoreA1=t.scoreA1,this.questMultNum=t.mulData.length),t.JudData&&(this.objJud.parentData=this.JudData=t.JudData,this.scoreA2=t.scoreA2,this.questJudgeNum=t.JudData.length),t.comData&&(this.objCom.parentData=this.comData=t.comData,this.scoreA3=t.scoreA3,this.questFillNum=t.comData.length),t.DisData&&(this.objDis.parentData=this.DisData=t.DisData,this.scoreA4=t.scoreA4,this.questDissNum=t.DisData.length),this.checkScore=this.scoreA0+this.scoreA1+this.scoreA2+this.scoreA3+this.scoreA4;var e=[];this.sinData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=t.qcScore.toString(),e.push(i),t.score}),this.mulData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=t.qcScore.toString(),e.push(i),t.score}),this.JudData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=t.qcScore.toString(),e.push(i),t.score}),this.comData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=t.qcScore.toString(),e.push(i),t.score}),this.DisData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=t.qcScore.toString(),e.push(i),t.score}),this.questList=e},getPaperInfo:function(t){this.showPaperShow=!0,this.addPaperShow=!1,0==t.tit?(this.scoreA0=t.score,this.sinData=t.resData):1==t.tit?(this.scoreA1=t.score,this.mulData=t.resData):2==t.tit?(this.scoreA2=t.score,this.comData=t.resData):3==t.tit&&(this.scoreA3=t.score,this.DisData=t.resData);var e=[],s=Number(this.scoreA0/this.sinData.length),i=Number(this.scoreA1/this.mulData.length),a=(Number(this.scoreA2/this.JudData.length),Number(this.scoreA3/this.comData.length)),n=Number(this.scoreA4/this.DisData.length);this.sinData.forEach(function(t,i){var a={};a.itemId=t.questId,a.itemSort=i+1,a.itemScore=s.toString(),e.push(a),t.score}),this.mulData.forEach(function(t,s){var a={};a.itemId=t.questId,a.itemSort=s+1,a.itemScore=i.toString(),e.push(a),t.score}),this.comData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=a.toString(),e.push(i),t.score}),this.DisData.forEach(function(t,s){var i={};i.itemId=t.questId,i.itemSort=s+1,i.itemScore=n.toString(),e.push(i),t.score}),this.questList=e,this.checkScore=this.scoreA0+this.scoreA1+this.scoreA2+this.scoreA3+this.scoreA4,this.questSingleNum=this.sinData.length,this.questMultNum=this.mulData.length,this.questJudgeNum=this.JudData.length,this.questFillNum=this.comData.length,this.questDissNum=this.DisData.length},submitInfo:function(){var t=this;return c()(a.a.mark(function e(){var s,i,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s={title:t.questBankTitle,description:t.questDesc,isPublic:t.isPublic,bigList:[]},""!=t.questBankTitle){e.next=4;break}return t.dialog("试题标题不能为空！"),e.abrupt("return",!1);case 4:if(""!=t.questDesc){e.next=7;break}return t.dialog("试题描述不能为空！"),e.abrupt("return",!1);case 7:return i=[],t.sinData.forEach(function(e){e.questionItemId=e._id,e.scores=(t.scoreA0/t.questSingleNum).toString()}),t.mulData.forEach(function(e){e.questionItemId=e._id,e.scores=(t.scoreA1/t.questMultNum).toString()}),t.comData.forEach(function(e){e.questionItemId=e._id,e.scores=(t.scoreA2/t.questFillNum).toString()}),t.DisData.forEach(function(e){e.questionItemId=e._id,e.scores=(t.scoreA3/t.questDissNum).toString()}),i=[].concat(o()(t.sinData),o()(t.mulData),o()(t.comData),o()(t.DisData)),s.bigList=i,e.next=16,t.$axioss.addTestPaper(s);case 16:return 1e3===(n=e.sent).data.code?(t.$message({message:n.data.msg,type:"success"}),t.$router.push({path:"/testPaperList"})):1100==n.code&&t.dialog(n.data.msg),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,t)}))()}},mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AddTestPaper"},[t.showPaperShow?s("div",{staticClass:"showPaper container"},[s("Header",{attrs:{title:t.typeTitle},on:{goBack:t.goBack}}),t._v(" "),s("div",{staticClass:"head"},[s("div",{staticClass:"headBox"},[s("div",{staticClass:"head-div"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.questBankTitle,expression:"questBankTitle"}],staticStyle:{"padding-left":"1%"},attrs:{placeholder:"请输入试题标题"},domProps:{value:t.questBankTitle},on:{input:function(e){e.target.composing||(t.questBankTitle=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"head-div"},[t._m(1),t._v(" "),s("el-input",{attrs:{maxlength:"36",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述"},model:{value:t.questDesc,callback:function(e){t.questDesc=e},expression:"questDesc"}})],1),t._v(" "),s("div",{staticClass:"head-div"},[t._m(2),t._v(" "),s("el-radio-group",{model:{value:t.isPublic,callback:function(e){t.isPublic=e},expression:"isPublic"}},[s("el-radio",{attrs:{label:1}},[t._v("公开")]),t._v(" "),s("el-radio",{attrs:{label:0}},[t._v("不公开")])],1)],1),t._v(" "),s("div",{staticClass:"head-div"},[t._m(3),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkScore,expression:"checkScore"}],staticStyle:{width:"30%"},attrs:{disabled:"",placeholder:"0"},domProps:{value:t.checkScore},on:{input:function(e){e.target.composing||(t.checkScore=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"head-div"},[s("div",{staticClass:"head-title"},[t._v("题目总数")]),t._v(" "),s("div",{staticClass:"block"},[s("p",[s("span",[t._v("单选题（"+t._s(t.questSingleNum)+"）")]),t._v(" "),s("span",[t._v("多选题（"+t._s(t.questMultNum)+"）")]),t._v(" "),s("span",[t._v("填空题（"+t._s(t.questFillNum)+"）")]),t._v(" "),s("span",[t._v("论述题（"+t._s(t.questDissNum)+"）")])]),t._v(" "),t._m(4)])])])]),t._v(" "),s("div",{staticClass:"selectBox Single"},[s("h3",{staticClass:"line"},[s("span",{staticClass:"editBtn",staticStyle:{float:"right"},on:{click:function(e){t.editAnswers(0)}}},[s("img",{attrs:{src:"static/images/edit.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scoreA0)+"分")]),t._v("\n\t\t\t\t\t1、单选题（每题"+t._s(t.scoreA0/t.questSingleNum?t.scoreA0/t.questSingleNum:0)+"分，合计"+t._s(t.scoreA0)+"分）\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.sinData,function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("h4",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(i+1)+"、"+t._s(e.questDesc)+"\n\t\t\t\t\t\t\t")]),t._v(" "),t._l(e.itemList,function(i,a){return s("el-radio-group",{key:a,model:{value:e.questAnswer,callback:function(s){t.$set(e,"questAnswer",s)},expression:"item.questAnswer"}},[s("el-radio",{attrs:{disabled:"",label:a,checked:e.answers}},[t._v(t._s(i.item)+"、"+t._s(i.itemDesc))])],1)})],2)])}))]),t._v(" "),s("div",{staticStyle:{height:"10px",background:"#eee"}}),t._v(" "),s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticClass:"editBtn",staticStyle:{float:"right"},on:{click:function(e){t.editAnswers(1)}}},[s("img",{attrs:{src:"static/images/edit.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scoreA1)+"分")]),t._v("\n\t\t\t\t\t2、多选题下列题目中至少有2个以上的正确答案，多选少选均不得分（每题"+t._s(t.scoreA1/t.questMultNum?t.scoreA1/t.questMultNum:0)+"分，合计"+t._s(t.scoreA1)+"分）\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.mulData,function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("h4",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(i+1)+"、"+t._s(e.questDesc)+"\n\t\t\t\t\t\t\t")]),t._v(" "),t._l(e.itemList,function(e,i){return s("el-checkbox-group",{key:i,model:{value:e.answersl,callback:function(s){t.$set(e,"answersl",s)},expression:"itec.answersl"}},[s("el-checkbox",{attrs:{disabled:"",label:i,checked:e.answersl}},[t._v(t._s(e.item)+"、"+t._s(e.itemDesc)+" ")])],1)})],2)])}))]),t._v(" "),s("div",{staticStyle:{height:"10px",background:"#eee"}}),t._v(" "),s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticClass:"editBtn",staticStyle:{float:"right"},on:{click:function(e){t.editAnswers(2)}}},[s("img",{attrs:{src:"static/images/edit.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scoreA2)+"分")]),t._v("\n\t\t\t\t\t3、填空题（每题"+t._s(t.scoreA2/t.questFillNum?t.scoreA2/t.questFillNum:0)+"分，合计"+t._s(t.scoreA2)+"分）\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.comData,function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu line"},[s("h4",[t._v(t._s(i+1)+"."+t._s(e.questDesc))]),t._v(" "),s("div",{staticClass:"continputBox"},t._l(e.itemList,function(e,i){return s("p",{key:i},[s("span",[t._v("( "+t._s(i+1)+" )")]),t._v(" "),s("span",{staticClass:"trueColor"},[t._v(" "+t._s(e.answersl)+" ")])])}))])])}))]),t._v(" "),s("div",{staticStyle:{height:"10px",background:"#eee"}}),t._v(" "),s("div",{staticClass:"selectBox"},[s("h3",{staticClass:"line"},[s("span",{staticClass:"editBtn",staticStyle:{float:"right"},on:{click:function(e){t.editAnswers(3)}}},[s("img",{attrs:{src:"static/images/edit.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scoreA3)+"分")]),t._v("\n\t\t\t\t\t4、论述题（每题"+t._s(t.scoreA3/t.questDissNum?t.scoreA3/t.questDissNum:0)+"分，合计"+t._s(t.scoreA3)+"分）\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"contentBox"},t._l(t.DisData,function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu "},[s("h4",[t._v(t._s(i+1)+"."+t._s(e.questDesc))]),t._v(" "),s("div",{staticClass:"continputBox"},[s("div",t._l(e.itemList,function(t,e){return s("span",{key:e,staticStyle:{"vertical-align":"top",display:"inline-block","margin-right":"0.5%"}})})),t._v(" "),s("p",{staticClass:"trueColor",staticStyle:{"font-size":"14px"}},[s("span",{staticStyle:{color:"#000"}},[t._v("答案：")]),t._v(t._s(e.questAnswer))])])])])}))]),t._v(" "),s("div",{staticStyle:{height:"10px",background:"#eee"}}),t._v(" "),s("div",{staticClass:"selectBox container"},[s("el-row",[s("el-button",{attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("提交")])],1)],1),t._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[t._v(t._s(t.checkScore?t.checkScore:0))]),t._v("\n\t\t\t\t\t/"),s("span",[t._v(t._s(t.allScores))])]),t._v(" "),s("p",[t._v("试卷分值")])])],1):t._e(),t._v(" "),s("el-dialog",{attrs:{title:"查看图片",visible:t.imgDialogVisible,width:"80%",center:""},on:{"update:visible":function(e){t.imgDialogVisible=e}}},[s("div",[s("img",{staticStyle:{width:"100%"},attrs:{src:t.targetImg}})]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imgDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),t.addPaperShow?s("div",{staticClass:"addPaper"},[0==t.paperNumber?s("div",[s("Single",{attrs:{objSin:t.objSin},on:{goBackInfo:function(e){t.goBackInfo(e)},getPaperInfo:function(e){t.getPaperInfo(e)}}})],1):t._e(),t._v(" "),1==t.paperNumber?s("div",[s("MultipleChoice",{attrs:{objMul:t.objMul},on:{goBackInfo:function(e){t.goBackInfo(e)},getPaperInfo:function(e){t.getPaperInfo(e)}}})],1):t._e(),t._v(" "),2==t.paperNumber?s("div",[s("Completion",{attrs:{objCom:t.objCom},on:{goBackInfo:function(e){t.goBackInfo(e)},getPaperInfo:function(e){t.getPaperInfo(e)}}})],1):t._e(),t._v(" "),3==t.paperNumber?s("div",[s("Discussion",{attrs:{objDis:t.objDis},on:{goBackInfo:function(e){t.goBackInfo(e)},getPaperInfo:function(e){t.getPaperInfo(e)}}})],1):t._e()]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-title"},[this._v("试题标题"),e("i",{staticClass:"tip"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-title"},[this._v("描述"),e("i",{staticClass:"tip"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-title"},[this._v("是否公开"),e("i",{staticClass:"tip"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-title"},[this._v("试卷分值"),e("i",{staticClass:"tip"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"hid",staticStyle:{color:"#bbb","margin-top":"3%"}},[this._v("备注    \n\t\t\t\t\t\t\t\t"),e("span",[e("i",{staticStyle:{display:"inline-block",width:"15px",height:"15px",background:"#67C23A",margin:"0 3px -3px 0"}}),this._v("绿色表示为正确答案")]),this._v(" "),e("span",[e("i",{staticStyle:{display:"inline-block",width:"15px",height:"15px",background:"#F56C6C",margin:"0 3px -3px 0"}}),this._v("红色字体表示选错")])])}]};var v=s("VU/8")(f,m,!1,function(t){s("MPKQ")},null,null);e.default=v.exports},MPKQ:function(t,e){},OULz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("wbv5"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Discussion container prel"},[s("Header",{attrs:{title:"论述题"}}),t._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:t.goBackInfo}}),t._v(" "),s("div",{staticClass:"headBox"},[s("h3",[s("span",{staticClass:"addTi",on:{click:t.openAddInfo}},[t._v("+")]),t._v("每道论述题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scores,expression:"scores"}],staticStyle:{"border-bottom":"1px dotted #555"},attrs:{disabled:""},domProps:{value:t.scores},on:{keyup:[t.scoreFun,t.keyUpFun],input:function(e){e.target.composing||(t.scores=e.target.value)}}}),t._v("分")])]),t._v(" "),s("div",{staticClass:"headBox"},[s("div",{staticClass:"head-title",staticStyle:{display:"inline"}},[t._v("科目：")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%",display:"inline"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",display:"inline-block"},model:{value:t.subjradio1,callback:function(e){t.subjradio1=e},expression:"subjradio1"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)})),t._v(" "),s("div",{staticStyle:{display:"inline"}},[s("el-button",{staticStyle:{width:"90px",display:"inline"},attrs:{type:"primary"},on:{click:t.submitSubjesc}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:t.filterInput,callback:function(e){t.filterInput=e},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:t.onsearchHandle},slot:"append"},[t._v("搜索")])],1)],1),t._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",{staticStyle:{"border-bottom":"1px solid #ddd"}},[s("el-checkbox",{attrs:{checked:""},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选("+t._s(t.checkVal)+"/"+t._s(t.allVal)+")")])],1),t._v(" "),t.tagTotal<=0?s("div",{staticClass:"noInfo"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filterBy(t.resData,t.filterInput),function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("div",{staticClass:"timu"},[s("el-checkbox-group",{on:{change:t.handleCheckedSingleChange},model:{value:e.checkedSingles,callback:function(s){t.$set(e,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:e.checkedSingles}},[t._v(t._s(i+1)+"、"+t._s(e.questDesc))]),t._v(" "),s("span",{staticStyle:{float:"right"},on:{click:function(e){t.deleAnswers(i)}}},[s("img",{attrs:{src:"static/images/dele.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb","margin-right":"1%"}},[t._v(t._s(t.scores)+"分")])],1)]),t._v(" "),s("div",{staticClass:"contAnswers"},[s("div",t._l(e.arr,function(e,i){return s("span",{key:i,staticStyle:{"vertical-align":"top",display:"inline-block","margin-right":"1%"}},[s("img",{staticStyle:{width:"100px"},attrs:{src:t.img_api+e.questImg},on:{click:t.showImages}})])})),t._v(" "),s("p",{staticStyle:{"font-size":"14px",color:"#67c23a"}},[s("span",[t._v("答案：")]),t._v(t._s(e.questAnswer))])])],1)])})],2)]),t._v(" "),s("div",{staticClass:"selectBox container pabs",staticStyle:{bottom:"0px","z-index":"99",padding:"15px 0"}},[s("el-row",[s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:t.goBackInfo}},[t._v("返回")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("提交")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"查看图片",visible:t.imgDialogVisible,width:"80%",center:""},on:{"update:visible":function(e){t.imgDialogVisible=e}}},[t._v(" --\x3e\n\t\t\t"),s("span",[t._v("查看图片")]),t._v(" "),s("div",{attrs:{id:"imgDialogVisible"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:t.targetImg,preview:"0","preview-text":"描述文字"}})]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imgDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"新增论述题",visible:t.showAdd},on:{"update:visible":function(e){t.showAdd=e}}},[s("el-form",{attrs:{model:t.form}},[s("div",{staticClass:"head-div"},[s("div",{staticClass:"head-title"},[t._v("科目")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio,callback:function(e){t.subjradio=e},expression:"subjradio"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)}))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("每题分数："),s("b",{staticStyle:{color:"red"}},[t._v(t._s(t.scores))]),t._v("分")]),t._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"600",type:"textarea",autosize:{minRows:3,maxRows:16},placeholder:"请输入题目描述，最多600个字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"正确答案"}},[s("el-input",{attrs:{maxlength:"600",type:"textarea",autosize:{minRows:3,maxRows:16},placeholder:"请输入答案，最多600个字"},model:{value:t.form.answers,callback:function(e){t.$set(t.form,"answers",e)},expression:"form.answers"}})],1),t._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"primary"},on:{click:t.AddInfo}},[t._v("确 定")]),t._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/images/success.png"}}),t._v(" "),s("div",{staticClass:"name"},[t._v(" 新增论述题成功")]),t._v(" "),t.sendMsgDisabled?s("div",{staticClass:"time"},[t._v(t._s(t.time+"s回到详情页")+">")]):t._e()]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"primary"},on:{click:t.openAddInfo}},[t._v("再加一个")]),t._v(" "),s("el-button",{staticStyle:{width:"45%",display:"inline-block"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("知道了")])],1)])]),t._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[t._v(t._s(t.checkScore))]),t._v("\n\t\t\t\t/"),s("span",[t._v("100 ")])]),t._v(" "),s("p",[t._v("试卷分值")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default"},[e("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),e("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var n=function(t){s("PTt+")},o=s("VU/8")(i.a,a,!1,n,null,null);e.default=o.exports},"PTt+":function(t,e){},RroQ:function(t,e){},acdc:function(t,e,s){"use strict";(function(t){var i=s("fZjL"),a=s.n(i),n=s("Xxa5"),o=s.n(n),r=s("exGp"),c=s.n(r);e.a={name:"MultipleChoice",props:{objMul:{type:Object}},data:function(){return{numVal:0,questKind:"1",subjradio:"",subjradio1:"",SubjectsList:[],filterInput:"",allVal:"",subjectId:1,bankType:1,pageNo:1,scores:3,checkScore:0,allScores:0,tagTotal:"",editBtn:0,dataVal:"",checkVal:0,checkAll:!1,isIndeterminate:!0,showAdd:!1,dialogTableVisible:!1,time:3,sendMsgDisabled:!1,form:{name:"",token:"",resData:[{title:"",content:"",answers:!1},{title:"",content:"",answers:!1},{title:"",content:"",answers:!1},{title:"",content:"",answers:!1}]},itemList:[],questList:[],ansList:[],resData:[{}]}},methods:{goBackInfo:function(){var t={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",t)},openAddInfo:function(){this.form.name="",this.form.resData.forEach(function(t,e){t.title="",t.content="",t.answers=!1}),this.editBtn=-1,this.showAdd=!0},filterBy:function(t,e){return 0===e.length?(this.tagTotal=t.length,this.resData):(t=t.filter(function(t){if(t.questDesc.match(e))return t.questDesc.match(e)}),this.tagTotal=t.length,t)},AddInfo:function(){var t=this;return c()(o.a.mark(function e(){var s,i,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s={subjectId:t.subjradio,questKind:t.questKind,questDesc:"",questAnswer:"",itemList:[]},i=void 0,a=void 0,n=0,0,void 0,{},a=t.form.resData,a.length,!(t.form.name.length<5||t.form.name.length>500)){e.next=8;break}return t.dialog("题目描述字数不能少于5个且不能多于500个！"),e.abrupt("return",!1);case 8:if(s.questDesc=t.form.name,a.forEach(function(t,e){if(1==t.answers&&n++,""==t.content)i=1;else{var a,o={};a=0==e?"A":1==e?"B":2==e?"C":3==e?"D":4==e?"E":5==e?"F":"无解",o.item=a,o.itemDesc=t.content,s.itemList.push(o),s.questAnswer+=t.answers+"ψ"}}),1!=i){e.next=13;break}return t.dialog("选项内容必填且还有答案"),e.abrupt("return",!1);case 13:if(!(n<1)){e.next=16;break}return t.dialog("请选择至少1个正确答案"),e.abrupt("return",!1);case 16:if(s.questAnswer=s.questAnswer.substring(0,s.questAnswer.length-1),-1==t.editBtn){e.next=22;break}t.resData.splice(t.editBtn,1,s),console.log(t.resData[t.editBtn]),e.next=26;break;case 22:return e.next=24,t.$axioss.addQuestionItem(s);case 24:1e3==e.sent.data.code?(t.showAdd=!1,t.dialogTableVisible=!0,t.handleCheckedSingleChange(),t.getList()):t.dialog("添加没成功！再试一次");case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,t)}))()},editAnswers:function(t){this.showAdd=!0,this.form.name=this.resData[t].name;var e=[];this.resData[t].arr.forEach(function(t,s){var i={};i.title=t.name.substring(0,1),i.content=t.name.substring(2),i.answers=t.answers,e.push(i)}),this.form.resData=e,this.editBtn=t},addAnswers:function(){if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;this.form.resData.push({title:"",content:"",answers:!1})},deleAnswers:function(t){this.checkVal;this.resData.length,this.resData.splice(t,1),this.handleCheckedSingleChange()},closeAnswers:function(t){if(t<2)return this.dialog("保留前2个选项，不能再删了！"),!1;this.form.resData.splice(t,1)},onsearchHandle:function(){},handleCheckAllChange:function(t){this.checkAll?this.resData.forEach(function(t,e){t.checkedSingles=!0}):this.resData.forEach(function(t,e){t.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(t){this.scoreFun()},singleChange:function(){},keyUpFun:function(){},scoreFun:function(){var t=0,e=0,s=0,i=!0,a=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(t,n){return!0===t.checkedSingles?(e+=a,s++):i=!1,i}),t=this.allVal*this.scores,this.checkAll=!!i,this.checkVal=s,this.allScores=t,this.checkScore=e},getList:function(t){var e=this;return c()(o.a.mark(function s(){var i,n,r,c;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={questKind:e.questKind.toString(),subject:""},n=[],i.subject=t||e.subjradio1.toString(),s.next=4,e.$axioss.getQuestionItemList(i);case 4:if(404!==(r=s.sent).code){s.next=10;break}return e.dialog("查询出错了"),s.abrupt("return",!1);case 10:if(1e3!==r.data.code){s.next=18;break}if(0!=a()(r.data.newArr.data).length){s.next=14;break}return e.resData=[],s.abrupt("return",!1);case 14:e.resData=r.data.newArr.data,e.resData.forEach(function(t,e){n=t.questAnswer.split("ψ"),t.itemList.forEach(function(t,e){t.answersl="true"===n[e]})}),e.objMul.parentData.length>0&&(c=e.objMul.parentData,e.scores=e.objMul.scores,e.resData.forEach(function(t,e){t.checkedSingles=!1,c.forEach(function(e,s){t._id==e._id&&(t.checkedSingles=!0)})})),e.scoreFun();case 18:case"end":return s.stop()}},s,e)}))()},getSubjectMenuList:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axioss.getSubjectMenuList();case 2:if(1e3!=(s=e.sent).data.code){e.next=8;break}return t.SubjectsList=s.data.data,t.subjradio1=s.data.data[0]._id,t.subjradio=s.data.data[0]._id,e.abrupt("return",t.subjradio1);case 8:case"end":return e.stop()}},e,t)}))()},submitSubjesc:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.getList(t.subjradio1),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e,t)}))()},submitInfo:function(){var t=this.resData,e=[],s={};s.tit=this.questKind,t.forEach(function(t,s){!0===t.checkedSingles&&e.push(t)}),s.score=this.checkScore,s.resData=e,this.$emit("getPaperInfo",s)}},mounted:function(){var e=this;this.getSubjectMenuList().then(function(t){""===t&&null===t||e.getList(t)}),t("footer").hide()},watch:{dialogTableVisible:function(t){if(t){var e=this;e.sendMsgDisabled=!0;var s=window.setInterval(function(){e.time--<=1&&(e.time=3,e.sendMsgDisabled=!1,e.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}}}).call(e,s("7t+N"))},auoD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("acdc"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MultipleChoice container"},[s("Header",{attrs:{title:"多选题库"}}),t._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:t.goBackInfo}}),t._v(" "),s("div",{staticClass:"headBox"},[s("h1",{staticClass:"display-4 text-center line pb15"},[t._v("多选题库")]),t._v(" "),s("h3",[s("span",{staticClass:"addTi",on:{click:t.openAddInfo}},[t._v("+")]),t._v("每道多选题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scores,expression:"scores"}],staticStyle:{"border-bottom":"1px dotted #555"},attrs:{disabled:"",placeholder:""},domProps:{value:t.scores},on:{keyup:[t.scoreFun,t.keyUpFun],input:function(e){e.target.composing||(t.scores=e.target.value)}}}),t._v("分")])]),t._v(" "),s("div",{staticClass:"headBox"},[s("div",{staticClass:"head-title",staticStyle:{display:"inline"}},[t._v("科目：")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%",display:"inline"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",display:"inline-block"},model:{value:t.subjradio1,callback:function(e){t.subjradio1=e},expression:"subjradio1"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)})),t._v(" "),s("div",{staticStyle:{display:"inline"}},[s("el-button",{staticStyle:{width:"90px",display:"inline"},attrs:{type:"primary"},on:{click:t.submitSubjesc}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:t.filterInput,callback:function(e){t.filterInput=e},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:t.onsearchHandle},slot:"append"},[t._v("搜索")])],1)],1),t._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{staticStyle:{"font-weight":"900"},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选("+t._s(t.checkVal)+"/"+t._s(t.allVal)+")")])],1),t._v(" "),t.tagTotal<=0?s("div",{staticClass:"noInfo"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filterBy(t.resData,t.filterInput),function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("el-checkbox-group",{on:{change:t.handleCheckedSingleChange},model:{value:e.checkedSingles,callback:function(s){t.$set(e,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("div",{staticClass:"timu"},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:e.checkedSingles}},[t._v(t._s(i+1)+"、"+t._s(e.questDesc))]),t._v(" "),s("span",{staticStyle:{float:"right",top:"31px",right:"0px",width:"21px"},on:{click:function(e){t.deleAnswers(i)}}},[s("img",{attrs:{src:"static/images/dele.png"}})]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#bbb",top:"0",right:"0"}},[t._v(t._s(t.scores)+"分")])],1),t._v(" "),t._l(e.itemList,function(e,i){return s("el-checkbox-group",{key:i,model:{value:e.answersl,callback:function(s){t.$set(e,"answersl",s)},expression:"itec.answersl"}},[s("el-checkbox",{attrs:{disabled:"",label:i},on:{change:t.singleChange}},[t._v(t._s(e.item)+"、"+t._s(e.itemDesc)+" ")])],1)})],2)])],1)})],2)]),t._v(" "),s("div",{staticClass:"selectBox container",staticStyle:{position:"fixed",bottom:"0px","z-index":"99",padding:"15px 0"}},[s("el-row",[s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:t.goBackInfo}},[t._v("返回")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("提交")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"新增多选题",visible:t.showAdd},on:{"update:visible":function(e){t.showAdd=e}}},[s("el-form",{attrs:{model:t.form}},[s("div",{staticClass:"head-div"},[s("div",{staticClass:"head-title"},[t._v("科目")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio,callback:function(e){t.subjradio=e},expression:"subjradio"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)}))]),t._v(" "),s("span",{staticStyle:{"font-size":"14px"}},[t._v("每题分数："),s("b",{staticStyle:{color:"red"}},[t._v(t._s(t.scores))]),t._v("分")]),t._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"500",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(e){t.addAnswers()}}},[t._v("添加")]),t._v(" "),s("span",[t._v("选项（勾选口默认该选项为正确答案）")])]),t._v(" "),s("el-checkbox-group",t._l(t.form.resData,function(e,i){return s("div",{key:i},[s("el-checkbox-group",{model:{value:e.answers,callback:function(s){t.$set(e,"answers",s)},expression:"items.answers"}},[s("el-checkbox",{attrs:{label:i}},[t._v(t._s(0==i?"A":1==i?"B":2==i?"C":3==i?"D":4==i?"E":5==i?"F":""))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"items.content"}],attrs:{placeholder:"答案"},domProps:{value:e.content},on:{input:function(s){s.target.composing||t.$set(e,"content",s.target.value)}}}),t._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(e){t.closeAnswers(i)}}})],1)],1)}))],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"43%"},attrs:{type:"primary"},on:{click:t.AddInfo}},[t._v("确 定")]),t._v(" "),s("el-button",{staticStyle:{display:"inline",width:"43%"},on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/images/success.png"}}),t._v(" "),s("div",{staticClass:"name"},[t._v(" 新增多选题成功")]),t._v(" "),t.sendMsgDisabled?s("div",{staticClass:"time"},[t._v(t._s(t.time+"s回到详情页")+">")]):t._e()]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{display:"inline",width:"43%"},attrs:{type:"primary"},on:{click:t.openAddInfo}},[t._v("再加一个")]),t._v(" "),s("el-button",{staticStyle:{display:"inline",width:"43%"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("知道了")])],1)])]),t._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[t._v(t._s(t.checkScore))]),t._v("\n\t\t\t\t/"),s("span",[t._v("100 ")])]),t._v(" "),s("p",[t._v("试卷分值")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default"},[e("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),e("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var n=function(t){s("o1p+"),s("CzDK")},o=s("VU/8")(i.a,a,!1,n,null,null);e.default=o.exports},"o1p+":function(t,e){},wawh:function(t,e){},wbv5:function(t,e,s){"use strict";(function(t){var i=s("fZjL"),a=s.n(i),n=s("Xxa5"),o=s.n(n),r=s("exGp"),c=s.n(r);e.a={name:"Discussion",props:{objDis:{type:Object}},data:function(){return{numVal:0,allVal:"",filterInput:"",questKind:"3",subjradio:"",subjradio1:"",SubjectsList:[],scores:10,checkScore:0,allScores:0,editBtn:0,dataVal:"",tagTotal:"",checkVal:0,checkAll:!1,showAdd:!1,dialogTableVisible:!1,imgDialogVisible:!1,targetImg:"",time:3,sendMsgDisabled:!1,accessToken:"",fileList:[],form:{name:"",action:"/edu/teach/uploadImg",imgType:2,answers:"",questImg:"",checkedSingles:!0},resData:[{}]}},methods:{goBackInfo:function(){var t={showPaperShow:!0,addPaperShow:!1};this.$emit("goBackInfo",t)},showImages:function(){this.targetImg=event.target.getAttribute("src"),this.imgDialogVisible=!0},handleAvatarSuccess:function(t,e){return 1e3===t.code?(this.successMsg("图片上传成功了"),this.form.questImg+=t.data.imgName+"ψ",this.showUpload=!1,this.fileList.push(this.img_api+t.data.imgName),!1):100===t.code?(this.dialog(t.message),this.$router.push({path:"/Login"}),!1):(this.dialog("图片没上传成功！请联系管理员或者再试一次"),!1)},beforeAvatarUpload:function(t){if(void 0==t)return this.dialog("请上传图片"),!1;var e=t.name.lastIndexOf("."),s=t.name.length,i=t.name.substring(e+1,s);return t.size/1024/1024<2?"jpg"!==i.toLowerCase()&&"png"!==i.toLowerCase()&&"jpeg"!==i.toLowerCase()&&"gif"!==i.toLowerCase()?(this.dialog("请上传图片文件"),this.filess="",!1):void 0:(this.dialog("上传文件大小不能超过 2MB!"),this.filess="",!1)},openAddInfo:function(){this.form.name="",this.form.answers="",this.form.img="",this.editBtn=-1,this.showAdd=!0},filterBy:function(t,e){return 0===e.length?(this.tagTotal=t.length,this.resData):(t=t.filter(function(t){if(t.questDesc.match(e))return t.questDesc.match(e)}),this.tagTotal=t.length,t)},AddInfo:function(){var t=this;return c()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s={subjectId:t.subjradio,questKind:t.questKind,questDesc:"",questAnswer:"",questImg:t.form.questImg,itemList:[]},void 0,void 0,!(t.form.name.length<5||t.form.name.length>37)){e.next=4;break}return t.dialog("题目描述字数不能少于5个且不能多于36个！"),e.abrupt("return",!1);case 4:if(!(t.form.answers.length<1||t.form.answers.length>255)){e.next=7;break}return t.dialog("答案字数不能少于1个且不能多于255个！"),e.abrupt("return",!1);case 7:if(s.questDesc=t.form.name,s.questAnswer=t.form.answers,-1==t.editBtn){e.next=14;break}t.resData.splice(t.editBtn,1,s),console.log(t.resData[t.editBtn]),e.next=19;break;case 14:return e.next=16,t.$axioss.addQuestionItem(s);case 16:i=e.sent,console.log(i),1e3==i.data.code?(t.showAdd=!1,t.dialogTableVisible=!0,t.fileList=[],t.handleCheckedSingleChange(),t.getList()):t.dialog("添加没成功！再试一次");case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,t)}))()},editAnswers:function(t){this.showAdd=!0,this.form.name=this.resData[t].name,this.form.answers=this.resData[t].answers,this.form.img=this.resData[t].img,this.editBtn=t},addAnswers:function(){if(!(this.form.resData.length<6))return this.dialog("不能再添加了！"),!1;this.form.resData.push({title:"",content:"",answers:!1})},deleAnswers:function(t){this.checkVal;this.resData.length,this.resData.splice(t,1),this.handleCheckedSingleChange()},closeAnswers:function(t){if(t<1)return this.dialog("有且仅保留第一个答案，不能再删了！"),!1;this.form.resData.splice(t,1)},onsearchHandle:function(){},handleCheckAllChange:function(t){this.checkAll?this.resData.forEach(function(t,e){t.checkedSingles=!0}):this.resData.forEach(function(t,e){t.checkedSingles=!1}),this.scoreFun()},handleCheckedSingleChange:function(t){this.scoreFun()},keyUpFun:function(){},scoreFun:function(){var t=0,e=0,s=0,i=void 0,a=Number(this.scores);this.allVal=this.resData.length,this.resData.forEach(function(t,n){return!0===t.checkedSingles?(e+=a,s++):i=!1,i}),t=this.allVal*this.scores,this.checkAll=i,this.checkVal=s,this.allScores=t,this.checkScore=e},getList:function(t){var e=this;return c()(o.a.mark(function s(){var i,n,r;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={questKind:e.questKind},[],[],[],i.subject=t||e.subjradio1.toString(),s.next=4,e.$axioss.getQuestionItemList(i);case 4:if(1100!==(n=s.sent).code){s.next=10;break}return e.dialog(n.message),s.abrupt("return",!1);case 10:if(1e3!==n.data.code){s.next=17;break}if(0!=a()(n.data.newArr.data).length){s.next=14;break}return e.resData=[],s.abrupt("return",!1);case 14:e.resData=n.data.newArr.data,e.objDis.parentData.length>0&&(r=e.objDis.parentData,e.scores=e.objDis.scores,e.resData.forEach(function(t,e){t.checkedSingles=!1,r.forEach(function(e,s){t.qcDesc===e.qcDesc&&(t.checkedSingles=!0)})})),e.scoreFun();case 17:case"end":return s.stop()}},s,e)}))()},submitInfo:function(){var t=this.resData,e=[],s={};s.tit=this.questKind,t.forEach(function(t,s){!0===t.checkedSingles&&e.push(t)}),s.score=this.checkScore,s.resData=e,this.$emit("getPaperInfo",s)},getSubjectMenuList:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axioss.getSubjectMenuList();case 2:if(1e3!=(s=e.sent).data.code){e.next=8;break}return t.SubjectsList=s.data.data,t.subjradio1=s.data.data[0]._id,t.subjradio=s.data.data[0]._id,e.abrupt("return",t.subjradio1);case 8:case"end":return e.stop()}},e,t)}))()},submitSubjesc:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.getList(t.subjradio1),e.abrupt("return",!1);case 2:case"end":return e.stop()}},e,t)}))()}},mounted:function(){t("footer").hide();var e=this;this.getSubjectMenuList().then(function(t){""===t&&null===t||e.getList(t)})},watch:{dialogTableVisible:function(t){if(t){var e=this;e.sendMsgDisabled=!0;var s=window.setInterval(function(){e.time--<=1&&(e.time=3,e.sendMsgDisabled=!1,e.dialogTableVisible=!1,window.clearInterval(s))},1e3)}}}}}).call(e,s("7t+N"))},xx8U:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("H8R1"),a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Single container"},[s("Header",{attrs:{title:"单选题库"}}),t._v(" "),s("div",{staticStyle:{width:"50px",height:"50px",position:"relative","margin-top":"-50px"},on:{click:t.goBackInfo}}),t._v(" "),s("div",{staticClass:"headBox"},[s("h1",{staticClass:"display-4 text-center line pb15"},[t._v("单选题库")]),t._v(" "),s("h3",[s("span",{staticClass:"addTi",on:{click:t.openAddInfo}},[t._v("+")]),t._v("每道单选题分数为"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scores,expression:"scores"}],staticStyle:{"border-bottom":"1px dotted #555"},attrs:{disabled:"",placeholder:""},domProps:{value:t.scores},on:{keyup:t.scoreFun,input:function(e){e.target.composing||(t.scores=e.target.value)}}}),t._v("分")])]),t._v(" "),s("div",{staticClass:"headBox"},[s("div",{staticClass:"head-title",staticStyle:{display:"inline"}},[t._v("科目：")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%",display:"inline"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio1,callback:function(e){t.subjradio1=e},expression:"subjradio1"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)})),t._v(" "),s("div",{staticStyle:{display:"inline"}},[s("el-button",{staticStyle:{width:"90px",display:"inline"},attrs:{type:"primary"},on:{click:t.submitSubjesc}},[t._v("查询")])],1)]),t._v(" "),s("div",{staticClass:"group-div"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"题目关键字","prefix-icon":"el-icon-search"},model:{value:t.filterInput,callback:function(e){t.filterInput=e},expression:"filterInput"}},[s("el-button",{attrs:{slot:"append"},on:{click:t.onsearchHandle},slot:"append"},[t._v("搜索")])],1)],1),t._v(" "),s("div",{staticClass:"selectBox"},[s("div",{staticClass:"contentBox"},[s("h3",[s("el-checkbox",{on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选("+t._s(t.checkVal)+"/"+t._s(t.allVal)+")")])],1),t._v(" "),t.tagTotal<=0?s("div",{staticClass:"noInfo"},[t._m(0)]):t._e(),t._v(" "),t._l(t.filterBy(t.resData,t.filterInput),function(e,i){return s("div",{key:i,staticClass:"timuBox"},[s("el-checkbox-group",{on:{change:t.handleCheckedSingleChange},model:{value:e.checkedSingles,callback:function(s){t.$set(e,"checkedSingles",s)},expression:"item.checkedSingles"}},[s("div",{staticClass:"timu"},[s("h4",[s("el-checkbox",{staticStyle:{display:"inline-block"},attrs:{checked:e.checkedSingles}},[t._v(t._s(i+1)+"、"+t._s(e.questDesc))]),t._v(" "),s("span",{staticClass:"pabs",staticStyle:{float:"right",top:"31px",right:"0px",width:"21px"},on:{click:function(e){t.deleAnswers(i)}}},[s("img",{attrs:{src:"static/images/dele.png"}})]),t._v(" "),s("span",{staticClass:"pabs",staticStyle:{float:"right",color:"#bbb",top:"0",right:"0"}},[t._v(t._s(t.scores)+"分")])],1),t._v(" "),t._l(e.itemList,function(i,a){return s("el-radio-group",{key:a,model:{value:e.questAnswer,callback:function(s){t.$set(e,"questAnswer",s)},expression:"item.questAnswer"}},[s("el-radio",{attrs:{label:a,disabled:""}},[t._v(t._s(i.item)+"、"+t._s(i.itemDesc))])],1)})],2)])],1)})],2)]),t._v(" "),s("div",{staticClass:"selectBox container",staticStyle:{position:"fixed",bottom:"0px","z-index":"99",padding:"15px 0"}},[s("el-row",[s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:t.goBackInfo}},[t._v("返回")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("提交")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"新增单选题",visible:t.showAdd},on:{"update:visible":function(e){t.showAdd=e}}},[s("el-form",{attrs:{model:t.form}},[s("div",{staticClass:"head-div"},[s("div",{staticClass:"head-title"},[t._v("科目")]),t._v(" "),s("div",{staticClass:"block",staticStyle:{width:"79%","margin-left":"1%"}},t._l(t.SubjectsList,function(e,i){return s("el-radio-group",{key:i,staticStyle:{"margin-right":"8px",overflow:"hidden",display:"inline-block"},model:{value:t.subjradio,callback:function(e){t.subjradio=e},expression:"subjradio"}},[s("el-radio",{attrs:{label:e._id}},[t._v(t._s(e.subjectName))])],1)}))]),t._v(" "),s("el-form-item",{attrs:{label:"题目描述"}},[s("el-input",{attrs:{maxlength:"20",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入题目描述，最多36个字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("div",[s("p",{staticStyle:{"font-size":"18px"}},[s("span",{staticStyle:{color:"#3DA2FE",float:"right"},on:{click:function(e){t.addAnswers()}}},[t._v("添加")]),t._v(" "),s("span",[t._v("选项（勾选"),s("b",{staticStyle:{"font-size":"30px"}},[t._v("o")]),t._v("默认该选项为正确答案）")])]),t._v(" "),s("el-radio-group",{model:{value:t.form.radio,callback:function(e){t.$set(t.form,"radio",e)},expression:"form.radio"}},t._l(t.form.answers,function(e,i){return s("div",{key:i},[s("el-radio",{attrs:{label:i}},[t._v(t._s(0==i?"A":1==i?"B":2==i?"C":3==i?"D":4==i?"E":5==i?"F":""))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"items.content"}],attrs:{placeholder:"答案"},domProps:{value:e.content},on:{input:function(s){s.target.composing||t.$set(e,"content",s.target.value)}}}),t._v(" "),s("i",{staticClass:"el-dialog__close el-icon el-icon-close closeBtn",on:{click:function(e){t.closeAnswers(i)}}})],1)}))],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.AddInfo}},[t._v("确 定")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:function(e){t.showAdd=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"","show-close":!1},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[s("div",{staticClass:"success-dialog"},[s("div",{staticClass:"content"},[s("img",{attrs:{src:"static/images/success.png"}}),t._v(" "),s("div",{staticClass:"name"},[t._v(" 新增单选题成功")]),t._v(" "),t.sendMsgDisabled?s("div",{staticClass:"time"},[t._v(t._s(t.time+"s回到详情页")+">")]):t._e()]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"47%",display:"inline"},attrs:{type:"primary"},on:{click:t.openAddInfo}},[t._v("再加一个")]),t._v(" "),s("el-button",{staticStyle:{width:"47%",display:"inline"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("知道了")])],1)])]),t._v(" "),s("div",{staticClass:"scoreAll"},[s("p",[s("span",{staticClass:"big"},[t._v(t._s(t.checkScore))]),t._v("\n\t\t\t\t/"),s("span",[t._v("100 ")])]),t._v(" "),s("p",[t._v("试卷分值")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default"},[e("img",{attrs:{src:"static/img/not-add-default.png",alt:""}}),this._v(" "),e("div",{staticClass:"not-class"},[this._v("\n\t\t\t\t\t\t\t暂无相关信息\n\t\t\t\t\t\t")])])}]};var n=function(t){s("wawh")},o=s("VU/8")(i.a,a,!1,n,null,null);e.default=o.exports}});