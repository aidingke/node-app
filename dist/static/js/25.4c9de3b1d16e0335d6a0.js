webpackJsonp([25],{tJJQ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={name:"IdeasList",data:function(){return{resData:"",errors:""}},mounted:function(){},created:function(){this.getList()},methods:{getList:function(){var t=this;this.$axios("/api/ideas/list").then(function(s){var e=t;s.data.forEach(function(t,s){t.description=e.repImgInfos(t.description)});var a=[];s.data.forEach(function(t,s){var e=t,i=[];t.imgs.forEach(function(t,s){if(t.length>10){var e={};e.imgs=t;var a=new Image;a.src=t,a.onload=function(t){e.width=this.width},i.push(e)}}),e.imgs=i,a.push(e)}),t.resData=a,console.log(t.resData)})},deleteBtn:function(t){var s=this;this.$axios.delete("/api/ideas/delete/"+t).then(function(t){s.$message({showClose:!0,message:t.data.msg,duration:1500,type:"success"}),s.getList()}).catch(function(t){s.error=t.response.data.msg,console.log(s.error),s.$message.error("错了哦，请再试一次")})},checkFun:function(t){var s=this;this.$axios.post("/api/ideas/checkT/"+t).then(function(t){s.$message({showClose:!0,message:t.data.success_msg,duration:1500,type:"success"})}).catch(function(t){s.error=t.response.data.msg,console.log(s.error),s.$message.error("错了哦，请再试一次")})}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[t._l(t.resData,function(s,a){return e("div",{key:a,staticClass:"card card-body",staticStyle:{width:"1002px",margin:"0 auto 15px"}},[e("h3",{staticClass:"cent"},[t._v(" "+t._s(s.title))]),t._v(" "),e("div",{staticClass:"conts",domProps:{innerHTML:t._s(s.description)}}),t._v(" "),e("div",{staticClass:"descImg"},t._l(s.imgs,function(t,s){return e("span",{key:s,staticClass:"okw"},[e("img",{attrs:{src:t.imgs}})])})),t._v(" "),e("p",[e("span",[e("img",{staticStyle:{width:"2rem","border-radius":"20px"},attrs:{src:"/static/avatar/"+s.user.avatar}}),t._v(t._s(s.user.name)+" ")])]),t._v(" "),e("div",{staticClass:"moreBtn"},[e("router-link",{staticClass:"btn btn-info",attrs:{to:"/artdetail?id="+s._id}},[t._v("查看详情")]),t._v(" "),e("router-link",{staticClass:"btn btn-success",attrs:{to:"/artedit?id="+s._id}},[t._v("编辑")]),t._v(" "),e("button",{staticClass:"btn btn-default",on:{click:function(e){t.deleteBtn(s._id)}}},[t._v("删除")]),t._v(" "),e("el-switch",{attrs:{"active-text":"共享文章","inactive-text":"私有文章"},on:{change:function(e){t.checkFun(s._id)}},model:{value:s.checkT,callback:function(e){t.$set(s,"checkT",e)},expression:"item.checkT"}})],1)])}),t._v(" "),t._m(0)],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticStyle:{margin:"5% auto 0",width:"85%"}},[s("a",{staticClass:"btn-primary btn",attrs:{href:"/artadd"}},[this._v("添加文章")])])}]};var n=e("VU/8")(a,i,!1,function(t){e("yMSG")},"data-v-6189b2d5",null);s.default=n.exports},yMSG:function(t,s){}});